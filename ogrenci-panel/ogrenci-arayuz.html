<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ã–ÄŸrenci Profili</title>
  <link rel="stylesheet" href="css/ogrenci-arayuz.css" />
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <ul class="menu">
        <li class="active"><a href="ogrenci-arayuz.html">ğŸ‘¨â€ğŸ“ Profil</a></li>
        <li><a href="daily.html">ğŸ“… GÃ¼nlÃ¼k Program</a></li>
        <li><a href="belge-yukleme.html">ğŸ“ Belge YÃ¼kleme</a></li>
        <li><a href="staj-sureci.html">ğŸ“˜ Staj SÃ¼reci</a></li>
        <li><a href="reset-password.html">ğŸ”‘ Åifre DeÄŸiÅŸtir</a></li>
        <li><a href="#" id="logoutBtn">â†©ï¸ Ã‡Ä±kÄ±ÅŸ Yap</a></li>
      </ul>
    </aside>

    <!-- Ä°Ã§erik -->
    <main class="content">
      <section id="profil" class="section-content active">
        <h2>ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci Profili</h2>

        <!-- Ã–ÄŸrenci Bilgilerini GÃ¶ster -->
        <div class="card" id="profileCard">
          <button id="editBtn" class="edit-icon" title="Bilgileri DÃ¼zenle">âœï¸</button>

          <p id="errorMessage" style="display: none; color: #c0392b; font-weight: bold;">
            Veri alÄ±nÄ±rken hata oluÅŸtu.
          </p>

          <div id="studentInfo">
            <p><strong>Ä°sim:</strong> <span id="isimGoster">YÃ¼kleniyor...</span></p>
            <p><strong>Ã–ÄŸrenci No:</strong> <span id="ogrenciNoGoster">YÃ¼kleniyor...</span></p>
            <p><strong>E-posta:</strong> <span id="emailGoster">YÃ¼kleniyor...</span></p>
            <p><strong>Staj Yeri:</strong> <span id="stajYeriGoster">YÃ¼kleniyor...</span></p>
            <p><strong>Staj Firma:</strong> <span id="firmaGoster">YÃ¼kleniyor...</span></p>
            <p><strong>Staj Departman:</strong> <span id="departmanGoster">YÃ¼kleniyor...</span></p>
            <p><strong>BaÅŸlangÄ±Ã§ Tarihi:</strong> <span id="baslangicGoster">YÃ¼kleniyor...</span></p>
            <p><strong>BitiÅŸ Tarihi:</strong> <span id="bitisGoster">YÃ¼kleniyor...</span></p>
            <p><strong>Toplam SÃ¼re:</strong> <span id="sureGoster">YÃ¼kleniyor...</span></p>
          </div>

          <!-- Bilgileri DÃ¼zenle Formu (BaÅŸlangÄ±Ã§ta gizli) -->
          <form id="profilForm" class="card" style="display: none;">
            <h3>âœï¸ Bilgileri DÃ¼zenle</h3>

            <!-- Gizli ID alanÄ± -->
            <input type="hidden" id="ogrenci_id" value="1" />

            <input type="text" id="isim" placeholder="Ä°sim" required />
            <input type="text" id="ogrenci_no" placeholder="Ã–ÄŸrenci No" required />
            <input type="email" id="email" placeholder="E-posta" required />
            <input type="text" id="staj_yeri" placeholder="Staj Yeri" required/>
            <input type="text" id="staj_firma" placeholder="Staj Firma" required />
            <input type="text" id="staj_departman" placeholder="Departman" required/>
            <input type="date" id="staj_baslangic" placeholder="BaÅŸlangÄ±Ã§ Tarihi" required/>
            <input type="date" id="staj_bitis" placeholder="BitiÅŸ Tarihi" required/>
            <input type="number" id="staj_toplam_sure" placeholder="Toplam SÃ¼re (gÃ¼n)" min="1" required/>
            <input type="text" id="ozet" placeholder="Staj Ã–zeti" />
            <input type="text" id="mesaj" placeholder="Staj MesajÄ±" />


            <button type="submit" id="guncelleBtn">ğŸ’¾ GÃ¼ncelle</button>
          </form>
        </div>
      </section>
    </main>
  </div>

  <!-- JavaScript dosyalarÄ± -->
  <script src="JavaScript/ogrenci-arayuz.js"></script>
  <script src="JavaScript/cikis.js"></script>

  <!-- GÃ¼ncelleme iÅŸlemi -->
  <script>
    document.getElementById("guncelleBtn").addEventListener("click", function (e) {
      e.preventDefault();

      const formData = {
        id: document.getElementById("ogrenci_id").value,
        ad: document.getElementById("isim").value,
        ogr_no: document.getElementById("ogrenci_no").value,
        email: document.getElementById("email").value,
        staj_yeri: document.getElementById("staj_yeri").value,
        firma: document.getElementById("staj_firma").value,
        departman: document.getElementById("staj_departman").value,
        baslangic: document.getElementById("staj_baslangic").value,
        bitis: document.getElementById("staj_bitis").value,
        sure: document.getElementById("staj_toplam_sure").value
      };

      fetch("../api/ogrenci-guncelle.php", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.json())
      .then(data => {
        if (data.status === "success") {
          alert("Bilgiler baÅŸarÄ±yla gÃ¼ncellendi!");
        } else {
          alert("Hata: " + data.message);
        }
      })
      .catch(error => {
        console.error("GÃ¼ncelleme sÄ±rasÄ±nda hata oluÅŸtu:", error);
      });
    });
  </script>
</body>
</html>
